<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="img/logo-dwtsp-96.png">
    <meta name="theme-color" content="#f2f2f2"/>
    <link rel="stylesheet" href="estilo.css">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="dwtsp.web.app">
    <meta name="apple-mobile-web-app-title" content="dwtsp">
    <meta name="msapplication-starturl" content="/index.html">
    <meta name="description" content="Web APP - PWA - Criar um atalho para mensagens diretas pela API ou Webapp do WhatsApp para um nÃºmero de telefone. Sem necessitar salvar o contato.">
    <title>DWTSP - Contato Direto pelo WhatsApp</title>

    <script>
       function abreWhats(evt) {  

         phone = encodeURIComponent(window.document.getElementsByName("phone")[0].value);
         text = encodeURIComponent(window.document.getElementsByName("text")[0].value);
         console.log(phone);
         console.log(text);
         if (phone != '') {
            // Fix Api Whatsapp on Desktops
            userAgent = window.navigator.userAgent;
            console.log(userAgent)
            iphone = (userAgent.indexOf("iPhone") >= 0?true:false);
            android = (userAgent.indexOf("Android") >= 0?true:false);
            console.log(iphone);
            console.log(android);
            console.log(iphone || android);
            // check if is a mobile
            if (iphone || android)
            {
                window.open('https://api.whatsapp.com/send?phone='+phone+'&text='+text);
            } else {// all others
                window.open('https://web.whatsapp.com/send?phone='+phone+'&text='+text,'_blank');
            }
        }    
       }
    </script>
</head>
<body>
    <div class="container center" id="conteudo">  
        <div class="row">
           <img  class="displayed" src="img/logo-dwtsp.png" alt="DWTSP" height="140px" width="175" alt="Logo DWTSP">
        </div>
        <div class="row">
             <h3>ENVIAR MENSAGEM PELO WHATSAPP</h3> 
        </div>    
        <div class="row">
            <div class="col-20">
               <label for="phone">Telefone</label>
            </div>
            <div class="col-80">
               <input id="phone" type="text" name="phone" placeholder="formato: 5547999991234">
            </div>
        </div>
        <div class="row">
            <div class="col-20">
               <label for="text">Mensagem</label>
            </div>
            <div class="col-80">
               <input id="text" type="text" name="text" />
            </div>   
        </div>
        <div class="row-botton">  
            <input type="button" onclick="abreWhats()" value="Enviar" />
        </div>
        </form>
    </div>    
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDEQ0L3QYUKxXucJjMe30lrI0_XZmcDNZk",
      authDomain: "services-sandroaf.firebaseapp.com",
      projectId: "services-sandroaf",
      storageBucket: "services-sandroaf.appspot.com",
      messagingSenderId: "8530075618",
      appId: "1:8530075618:web:476219e15e278d98d2a3bb",
      measurementId: "G-STZ7LQHZK3"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
  <script src="main.js"></script>
</html>